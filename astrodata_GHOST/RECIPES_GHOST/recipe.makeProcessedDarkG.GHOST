# This recipe performs the standardization and corrections needed to convert
# the raw input dark images into a single stacked dark image. This output
# processed dark is stored on disk using storeProcessedDark and has a name
# equal to the name of the first input dark image with "_dark.fits" appended.

prepare(attach_mdf=False)
addDQ(illum_mask=False)
addVAR(read_noise=True)
#nonlinearityCorrect
overscanCorrect
tileAmplifiers
biasCorrect
ADUToElectrons
addVAR(poisson_noise=True)
addToList(purpose="forStack")
getList(purpose="forStack")
stackFrames(reject_method=ccdclip, mclip=True, snoise=0.02, lsigma=7., hsigma=7.) #, nrejfile=reject7, verbose=True)
clipSigmaBPM
storeProcessedDark
