<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6.3. findApertures &#8212; GHOST Users&#39; Manual 0.9.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/todo-styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.4. fitWavelength" href="fitWavelength.html" />
    <link rel="prev" title="6.2. extractProfile" href="extractProfile.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="fitWavelength.html" title="6.4. fitWavelength"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="extractProfile.html" title="6.2. extractProfile"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">GHOST Users&#39; Manual 0.9.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../primitives.html" accesskey="U">6. Primitives for GHOST</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="findapertures">
<h1>6.3. findApertures<a class="headerlink" href="#findapertures" title="Permalink to this headline">¶</a></h1>
<div class="section" id="purpose">
<h2>6.3.1. Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>This primitive will take an existing <code class="docutils literal"><span class="pre">polyfit</span></code> model for the aperture
locations in a frame, and fit the model to the observed data.</p>
<p>Note that this primitive is only run on prepared flat fields (i.e. images
that have been run through the <code class="docutils literal"><span class="pre">makeProcessedFlatG</span></code> recipe). The primitive
will abort if passed any other type of file.</p>
</div>
<div class="section" id="inputs-and-outputs">
<h2>6.3.2. Inputs and Outputs<a class="headerlink" href="#inputs-and-outputs" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">findApertures</span></code> takes no particular configuration inputs.</p>
</div>
<div class="section" id="algorithm">
<h2>6.3.3. Algorithm<a class="headerlink" href="#algorithm" title="Permalink to this headline">¶</a></h2>
<p>The RecipeSystem will automatically determine the appropriate initial polyfit
model, based on the arm, resolution and date of the observation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Date selection of polyfit models has yet to be implemented.</p>
</div>
<p>The primitive will instantiate an <code class="docutils literal"><span class="pre">Arm</span></code> object from the <code class="docutils literal"><span class="pre">polyfit.ghost</span></code>
module, which is included as a part of <code class="docutils literal"><span class="pre">astrodata_GHOST</span></code>. This <code class="docutils literal"><span class="pre">Arm</span></code>
contains all the functions for fitting the aperture positions of the data.</p>
<p>The <code class="docutils literal"><span class="pre">Arm</span></code> object then makes the following three steps:</p>
<ul class="simple">
<li>An initial model of the spectrograph is constructed based on the parameters
read-on from the lookup system;</li>
<li>The reduced flat-field is convolved with the slit profile of the instrument,
determined from the slit viewing camera</li>
<li>The initial model is fitted to the result of the convolved flat field, which
represents the location of the middle of each order. The result of this fit
is then used in the spectra extraction as the basis for the location of the
orders.</li>
</ul>
<p>A <code class="docutils literal"><span class="pre">polyfit</span></code> model FITS file is then written out to the calibration system.</p>
</div>
<div class="section" id="issues-and-limitations">
<h2>6.3.4. Issues and Limitations<a class="headerlink" href="#issues-and-limitations" title="Permalink to this headline">¶</a></h2>
<p>There is a placeholder retrieval function for getting back a fitted
<code class="docutils literal"><span class="pre">polyfit</span></code> model, but there are no primitives yet for applying this model
to data.</p>
<p>Future versions of this fitting procedure will include an extra polynomial
describing the change in the spatial scale of the fiber images as a function
of order location on the CCD. The current lack of such feature currently
results in a slight innaccuracy of the fit on the edge of orders which are
close together. This is due to the fact that the convolution with a fixed profile
results is slight overlap at those locations.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">6.3. findApertures</a><ul>
<li><a class="reference internal" href="#purpose">6.3.1. Purpose</a></li>
<li><a class="reference internal" href="#inputs-and-outputs">6.3.2. Inputs and Outputs</a></li>
<li><a class="reference internal" href="#algorithm">6.3.3. Algorithm</a></li>
<li><a class="reference internal" href="#issues-and-limitations">6.3.4. Issues and Limitations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="extractProfile.html"
                        title="previous chapter">6.2. extractProfile</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fitWavelength.html"
                        title="next chapter">6.4. fitWavelength</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/primitives_pages/findApertures.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="fitWavelength.html" title="6.4. fitWavelength"
             >next</a> |</li>
        <li class="right" >
          <a href="extractProfile.html" title="6.2. extractProfile"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">GHOST Users&#39; Manual 0.9.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../primitives.html" >6. Primitives for GHOST</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-17, The GHOST DRS Team &amp; Kathleen Labrie.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.5.
    </div>
  </body>
</html>